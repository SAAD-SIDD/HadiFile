import base64
exec(base64.b64decode("IyB1bmNvbXB5bGU2IHZlcnNpb24gMy43LjQNCiMgUHl0aG9uIGJ5dGVjb2RlIDIuNw0KIyBEZWNvbXBpbGVkIGZyb206IFB5dGhvbiAyLjcuMTcgKGRlZmF1bHQsIERlYyAgNSAyMDE5LCAxMDo0NTozNikgDQojIFtHQ0MgNC4yLjEgQ29tcGF0aWJsZSBBbmRyb2lkICg1MjIwMDQyIGJhc2VkIG9uIHIzNDYzODljKSBDbGFuZyA4LjAuNyAoaHR0cHM6Ly8NCiMgRW1iZWRkZWQgZmlsZSBuYW1lOiA8TVJfREFSSz4NCmltcG9ydCBvcywgc3lzLCB0aW1lLCBkYXRldGltZSwgcmUsIHRocmVhZGluZywganNvbiwgcmFuZG9tLCByZXF1ZXN0cywgaGFzaGxpYiwgY29va2llbGliLCB1dWlkDQpmcm9tIG11bHRpcHJvY2Vzc2luZy5wb29sIGltcG9ydCBUaHJlYWRQb29sDQpmcm9tIHJlcXVlc3RzLmV4Y2VwdGlvbnMgaW1wb3J0IENvbm5lY3Rpb25FcnJvcg0KX19hdXRob3JfXyA9ICdUZWNobmljYWxoYWRpNDMzJw0KX19jb3B5cmlnaHQgPSAnQWxsIHJpZ2h0cyByZXNlcnZlZCAuIENvcHlyaWdodCAgVGVjaG5pY2FsaGFkaTQzMycNCm9zLnN5c3RlbSgndGVybXV4LXNldHVwLXN0b3JhZ2UnKQ0KdHJ5Og0KICAgIG9zLm1rZGlyKCcvc2RjYXJkL2lkcycpDQpleGNlcHQgT1NFcnJvcjoNCiAgICBwYXNzDQoNCmJkID0gcmFuZG9tLnJhbmRpbnQoMjAwMDAwMDAuMCwgMzAwMDAwMDAuMCkNCnNpbSA9IHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkNCmhlYWRlciA9IHsneC1mYi1jb25uZWN0aW9uLWJhbmR3aWR0aCc6IHJlcHIoYmQpLCANCiAgICd4LWZiLXNpbS1obmknOiByZXByKHNpbSksIA0KICAgJ3gtZmItbmV0LWhuaSc6IHJlcHIoc2ltKSwgDQogICAneC1mYi1jb25uZWN0aW9uLXF1YWxpdHknOiAnRVhDRUxMRU5UJywgDQogICAneC1mYi1jb25uZWN0aW9uLXR5cGUnOiAnY2VsbC5DVFJhZGlvQWNjZXNzVGVjaG5vbG9neUhTRFBBJywgDQogICAndXNlci1hZ2VudCc6ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgNC40LjI7IE5leHVzIDQgQnVpbGQvS09UNDlIKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMzQuMC4xODQ3LjExNCBNb2JpbGUgU2FmYXJpLzUzNy4zNicsIA0KICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLCANCiAgICd4LWZiLWh0dHAtZW5naW5lJzogJ0xpZ2VyJ30NCm9zLnN5c3RlbSgnZ2l0IHB1bGwnKQ0Kb3Muc3lzdGVtKCdjbGVhcicpDQpsb2dvID0gIiIiDQpcblx4MWJbMTs5Mm0NClxuXHgxYlsxOzkybQ0KXG5ceDFiWzE7OTNtICAgICAgICAgIHt9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7fQ0KXG5ceDFiWzE7OTJtICAgICAgIHt9ICAgIHt9ICAgICAgICAgICAgICAgICAgICAgICAgIHt9ICAge30NClxuXHgxYlsxOzkzbSAgICAge30gICAgICAgIHt9ICAgICAgICAgICAgICAgICAgICAge30gICAgICAge30NClxuXHgxYlsxOzk2bSAgIHt9ICAgICAgICAgICAge30gICAgICAgICAgICAgICAgIHt9ICAgICAgICAgICB7fSANClxuXHgxYlsxOzk3bSB7fSAgICAgICAgICAgICAgICB7fSAgICAgICAgICAgICB7fSAgICAgICAgICAgICAgIHt9DQpcblx4MWJbMTs5NG0gDQoNClxuXHgxYlsxOzkybSAgICAgICAgIFRlY2huaWNhbCB+ICAgICAgICAgICAgICAgICAgICAgICBcblx4MWJbMTs5MW0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHgxYlsxOzk3bVx4ZTJceDllXHhhMyBBdXRob3IgOiBUZWNobmljYWwgIHggSGFkaVxuXHgxYlsxOzk3bVx4ZTJceDllXHhhMyBHaXRodWIgOiBodHRwczovL2dpdGh1Yi5jb20vVGVjaG5pY2FsaGFkaTQzM1xuXHgxYlsxOzk3bVx4ZTJceDllXHhhMyBXUCBOTzogKzkyMzE0NDU3MjU4OVxuXHgxYlsxOzkxbS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJyIiIg0KDQoNCg0KDQoNCg0KZGVmIGlwKCk6DQogICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgcHJpbnQgbG9nbw0KICAgIHByaW50ICdcdENvbGxlY3RpbmcgZGV2aWNlIGluZm8nDQogICAgdHJ5Og0KICAgICAgICBpcGluZm8gPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9pcC1hcGkuY29tL2pzb24vJykNCiAgICAgICAgeiA9IGpzb24ubG9hZHMoaXBpbmZvLnRleHQpDQogICAgICAgIGlwcyA9IHpbJ3F1ZXJ5J10NCiAgICAgICAgY291bnRyeSA9IHpbJ2NvdW50cnknXQ0KICAgICAgICByZWdpID0gelsncmVnaW9uTmFtZSddDQogICAgICAgIG5ldHdvcmsgPSB6Wydpc3AnXQ0KICAgIGV4Y2VwdDoNCiAgICAgICAgcGFzcw0KDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm0gWW91ciBpcDogJyArIGlwcw0KICAgIHRpbWUuc2xlZXAoMSkNCiAgICBwcmludCAnXHgxYlsxOzkybSBZb3VyIGNvdW50cnk6ICcgKyBjb3VudHJ5DQogICAgdGltZS5zbGVlcCgxKQ0KICAgIHByaW50ICdceDFiWzE7OTJtIFlvdXIgcmVnaW9uOiAnICsgcmVnaQ0KICAgIHRpbWUuc2xlZXAoMSkNCiAgICBwcmludCAnIFx4MWJbMTs5Mm1Zb3VyIG5ldHdvcms6ICcgKyBuZXR3b3JrDQogICAgdGltZS5zbGVlcCgxKQ0KICAgIHByaW50ICcgTG9hZGluZyAuLi4nDQogICAgdGltZS5zbGVlcCgxKQ0KICAgIGxvZ19tZW51KCkNCg0KDQpkZWYgbG9nX21lbnUoKToNCiAgICB0cnk6DQogICAgICAgIHRfY2hlY2sgPSBvcGVuKCdhY2Nlc3NfdG9rZW4udHh0JywgJ3InKQ0KICAgICAgICBtZW51KCkNCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToNCiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M20gfn5+fiBMb2dpbiBtZW51IH5+fn5ceDFiWzE7OTFtJw0KICAgICAgICBwcmludCA0NyAqICctJw0KICAgICAgICBwcmludCAnXHgxYlsxOzkybVsxXSBMb2dpbiB3aXRoIEZhY2VCb29rJw0KICAgICAgICBwcmludCAnXHgxYlsxOzkybVsyXSBMb2dpbiB3aXRoIHRva2VuJw0KICAgICAgICBwcmludCAnXHgxYlsxOzkybVszXSBMb2dpbiB3aXRoIGNvb2tpZXMnDQogICAgICAgIHByaW50ICcnDQogICAgICAgIGxvZ19tZW51X3MoKQ0KDQoNCmRlZiBsb2dfbWVudV9zKCk6DQogICAgcyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5N21ceGUyXHg5NVx4YjBceGUyXHg5NFx4ODBoYWRpXHhlMlx4OWVceGE0ICcpDQogICAgaWYgcyA9PSAnMSc6DQogICAgICAgIGxvZ19mYigpDQogICAgZWxpZiBzID09ICcyJzoNCiAgICAgICAgbG9nX3Rva2VuKCkNCiAgICBlbGlmIHMgPT0gJzMnOg0KICAgICAgICBsb2dfY29va2llKCkNCiAgICBlbHNlOg0KICAgICAgICBwcmludCAnJw0KICAgICAgICBwcmludCAnXFwgU2VsZWN0IHZhbGlkIG9wdGlvbiAnDQogICAgICAgIHByaW50ICcnDQogICAgICAgIGxvZ19tZW51X3MoKQ0KDQoNCmRlZiBsb2dfZmIoKToNCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICBwcmludCBsb2dvDQogICAgcHJpbnQgJ1x4MWJbMTszMTsxbUxvZ2luIHdpdGggaWQvcGFzcycNCiAgICBwcmludCA0NyAqICctJw0KICAgIGxpZCA9IHJhd19pbnB1dCgnXHgxYlsxOzkybSBJZC9tYWlsL25vOiAnKQ0KICAgIHB3ZHMgPSByYXdfaW5wdXQoJyBceDFiWzE7OTNtUGFzc3dvcmQ6ICcpDQogICAgdHJ5Og0KICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwd2QpLnRleHQNCiAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgaWYgJ2xvYycgaW4gcToNCiAgICAgICAgICAgIHRzID0gb3BlbignYWNjZXNzX3Rva2VuLnR4dCcsICd3JykNCiAgICAgICAgICAgIHRzLndyaXRlKHFbJ2xvYyddKQ0KICAgICAgICAgICAgdHMuY2xvc2UoKQ0KICAgICAgICAgICAgbWVudSgpDQogICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106DQogICAgICAgICAgICBwcmludCAnIFVzZXIgbXVzdCB2ZXJpZnkgYWNjb3VudCBiZWZvcmUgbG9naW4nDQogICAgICAgICAgICByYXdfaW5wdXQoJ1x4MWJbMTs5Mm0gUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpDQogICAgICAgICAgICBsb2dfZmIoKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgcHJpbnQgJyBJZC9QYXNzIG1heSBiZSB3cm9uZycNCiAgICAgICAgICAgIHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1QcmVzcyBlbnRlciB0byB0cnkgYWdhaW4gJykNCiAgICAgICAgICAgIGxvZ19mYigpDQogICAgZXhjZXB0Og0KICAgICAgICBwcmludCAnJw0KICAgICAgICBwcmludCAnRXhpdGluZyB0b29sJw0KICAgICAgICBvcy5zeXN0ZW0oJ2V4aXQnKQ0KDQoNCmRlZiBsb2dfdG9rZW4oKToNCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICBwcmludCBsb2dvDQogICAgcHJpbnQgJ1x4MWJbMTs5M21Mb2dpbiB3aXRoIHRva2VuXHgxYlsxOzkxbScNCiAgICBwcmludCA0NyAqICctJw0KICAgIHRvayA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1QYXN0ZSB0b2tlbiBoZXJlOiBceDFiWzE7OTFtJykNCiAgICBwcmludCA0NyAqICctJw0KICAgIHRfcyA9IG9wZW4oJ2FjY2Vzc190b2tlbi50eHQnLCAndycpDQogICAgdF9zLndyaXRlKHRvaykNCiAgICB0X3MuY2xvc2UoKQ0KICAgIG1lbnUoKQ0KDQoNCmRlZiBsb2dfY29va2llKCk6DQogICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgcHJpbnQgbG9nbw0KICAgIHByaW50ICcnDQogICAgcHJpbnQgJ1x4MWJbMTszMTsxbUxvZ2luIENvb2tpZXMnDQogICAgcHJpbnQgJycNCiAgICB0cnk6DQogICAgICAgIGNvb2tpZSA9IHJhd19pbnB1dCgnIFBhc3RlIGNvb2tpZXMgaGVyZTogJykNCiAgICAgICAgZGF0YSA9IHsndXNlci1hZ2VudCc6ICdNb3ppbGxhLzUuMCAoWDExOyBMaW51eCB4ODZfNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIEtpd2kgQ2hyb21lLzY4LjAuMzQzOC4wIFNhZmFyaS81MzcuMzYnLCANCiAgICAgICAgICAgJ3JlZmVyZXInOiAnaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS8nLCANCiAgICAgICAgICAgJ2hvc3QnOiAnbS5mYWNlYm9vay5jb20nLCANCiAgICAgICAgICAgJ29yaWdpbic6ICdodHRwczovL20uZmFjZWJvb2suY29tJywgDQogICAgICAgICAgICd1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzJzogJzEnLCANCiAgICAgICAgICAgJ2FjY2VwdC1sYW5ndWFnZSc6ICdpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNycsIA0KICAgICAgICAgICAnY2FjaGUtY29udHJvbCc6ICdtYXgtYWdlPTAnLCANCiAgICAgICAgICAgJ2FjY2VwdCc6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44JywgDQogICAgICAgICAgICdjb250ZW50LXR5cGUnOiAndGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04JywgDQogICAgICAgICAgICdjb29raWUnOiBjb29raWV9DQogICAgICAgIGMxID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL20uZmFjZWJvb2suY29tL2NvbXBvc2VyL29jZWxvdC9hc3luY19sb2FkZXIvP3B1Ymxpc2hlcj1mZWVkI189XycsIGhlYWRlcnM9ZGF0YSkNCiAgICAgICAgYzIgPSByZS5zZWFyY2goJyhFQUFBXFx3KyknLCBjMS50ZXh0KQ0KICAgICAgICBoYXNpbCA9IGMyLmdyb3VwKDEpDQogICAgICAgIG9rID0gb3BlbignYWNjZXNzX3Rva2VuLnR4dCcsICd3JykNCiAgICAgICAgb2sud3JpdGUoaGFzaWwpDQogICAgICAgIG9rLmNsb3NlKCkNCiAgICAgICAgbWVudSgpDQogICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOg0KICAgICAgICBwcmludCAnJw0KICAgICAgICBwcmludCAnXHRJbnZhbGlkIGNvb2tpZXMnDQogICAgICAgIHByaW50ICcnDQogICAgICAgIHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1QcmVzcyBlbnRlciB0byB0cnkgYWdhaW4gJykNCiAgICAgICAgbG9nX21lbnUoKQ0KICAgIGV4Y2VwdCBVbmJvdW5kTG9jYWxFcnJvcjoNCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgcHJpbnQgJ1x0SW52YWxpZCBjb29raWVzJw0KICAgICAgICBwcmludCAnJw0KICAgICAgICByYXdfaW5wdXQoJyBceDFiWzE7OTJtUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpDQogICAgICAgIGxvZ19tZW51KCkNCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5TU0xFcnJvcjoNCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgcHJpbnQgJ1x0SW52YWxpZCBjb29raWVzJw0KICAgICAgICBwcmludCAnJw0KICAgICAgICByYXdfaW5wdXQoJyBceDFiWzE7OTJtUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpDQogICAgICAgIGxvZ19tZW51KCkNCg0KDQpkZWYgbWVudSgpOg0KICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgIHRyeToNCiAgICAgICAgdG9rZW4gPSBvcGVuKCdhY2Nlc3NfdG9rZW4udHh0JywgJ3InKS5yZWFkKCkNCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToNCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgcHJpbnQgbG9nbw0KICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtTG9naW4gRkIgaWQgdG8gY29udGludWUnDQogICAgICAgIHRpbWUuc2xlZXAoMSkNCiAgICAgICAgbG9nX21lbnUoKQ0KDQogICAgdHJ5Og0KICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZT9hY2Nlc3NfdG9rZW49JyArIHRva2VuKQ0KICAgICAgICBxID0ganNvbi5sb2FkcyhyLnRleHQpDQogICAgICAgIHogPSBxWyduYW1lJ10NCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToNCiAgICAgICAgcHJpbnQgbG9nbw0KICAgICAgICBwcmludCAnJw0KICAgICAgICBwcmludCAnXHQgQWNjb3VudCBDaGVla3BvaW50XHgxYlswOzk3bScNCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgYWNjZXNzX3Rva2VuLnR4dCcpDQogICAgICAgIHRpbWUuc2xlZXAoMSkNCiAgICAgICAgbG9nX21lbnUoKQ0KICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoNCiAgICAgICAgcHJpbnQgbG9nbw0KICAgICAgICBwcmludCAnJw0KICAgICAgICBwcmludCAnXHQgVHVybiBvbiBtb2JpbGUgZGF0YS93aWZpXHgxYlswOzk3bScNCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgcmF3X2lucHV0KCcgXHgxYlsxOzkybVByZXNzIGVudGVyIGFmdGVyIHR1cm5pbmcgb24gbW9iaWxlIGRhdGEvd2lmaSAnKQ0KICAgICAgICBtZW51KCkNCg0KICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgIHByaW50IGxvZ28NCiAgICANCiAgICBwcmludCAnICBceDFiWzE7OTJtTG9nZ2VkIGluIHVzZXI6IFx4MWJbMTs5MW0nICsgeg0KICAgIHByaW50IDQ3ICogJy0nDQogICAgcHJpbnQgJyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gJw0KICAgIHByaW50ICdceDFiWzE7OTJtWzFdIENyYWNrIHdpdGggQXV0byBwYXNzd29yZCAxMCcNCiAgICBwcmludCAnXHgxYlsxOzkybVsyXSBDcmFjayB3aXRoIE51bWJlciBwYXNzd29yZCA2Jw0KICAgIHByaW50ICdceDFiWzE7OTJtWzNdIENyYWNrIHdpdGggTmFtZSArIE51bWJlciBwYXNzd29yZCA4Jw0KICAgIHByaW50ICdceDFiWzE7OTJtWzRdIEV4dHJhY3QgRmlsZScNCiAgICBwcmludCAnXHgxYlsxOzkybVs1XSBMb2dvdXQnDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bNl0gRGVsZXRlIHRyYXNoIGZpbGVzJw0KICAgIG1lbnVfcygpDQoNCg0KZGVmIG1lbnVfcygpOg0KICAgIG1zID0gcmF3X2lucHV0KCdceDFiWzE7OTdtXHhlMlx4OTVceGIwXHhlMlx4OTRceDgwaGFkaVx4ZTJceDllXHhhNCAnKQ0KICAgIGlmIG1zID09ICcxJzoNCiAgICAgICAgYXV0b19jcmFjaygpDQogICAgZWxpZiBtcyA9PSAnMic6DQogICAgICAgIGNob2ljZV9jcmFjaygpDQogICAgZWxpZiBtcyA9PSAnMyc6DQogICAgICAgIG5hbWVfY3JhY2soKQ0KICAgIGVsaWYgbXMgPT0gJzQnOg0KICAgICAgICBvcy5zeXN0ZW0oImdpdCBjbG9uZSBodHRwczovL2dpdGh1Yi5jb20vVEhFLURFTU9OLUFOTk9TL0V4dHJhY3QiKQ0KICAgICAgICANCiAgICAgICAgb3Muc3lzdGVtKCJjZCBFeHRyYWN0ICYmIGNobW9kICt4IGV4dHJhY3QgJiYgLi9leHRyYWN0IikNCiAgICBlbGlmIG1zID09ICc1JzoNCiAgICAgICAgbG91dCgpDQogICAgZWxpZiBtcyA9PSAnNic6DQogICAgICAgIHJ0cmFzaCgpDQogICAgZWxzZToNCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgcHJpbnQgJ1x0U2VsZWN0IHZhbGlkIG9wdGlvbicNCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgbWVudV9zKCkNCg0KDQpkZWYgY3JhY2soKToNCiAgICBnbG9iYWwgdG9rZXQNCiAgICB0cnk6DQogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkNCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToNCiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgcHJpbnQgJ1x0IEZpbGUgTm90IEZvdW5kIFx4MWJbMDs5N20nDQogICAgICAgIHByaW50ICcnDQogICAgICAgIHRpbWUuc2xlZXAoMSkNCiAgICAgICAgbG9nX21lbnUoKQ0KDQogICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgcHJpbnQgbG9nbw0KICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBBdXRvIHBhc3MgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nDQogICAgcHJpbnQgNDcgKiAnLScNCiAgICBwcmludCAnXHgxYlsxOzkybVsxXSBQdWJsaWMgaWQgY2xvbmluZycNCiAgICBwcmludCAnXHgxYlsxOzkybVsyXSBGb2xsb3dlcnMgY2xvbmluZycNCiAgICBwcmludCAnXHgxYlsxOzkybVszXSBGaWxlIGNsb25pbmcnDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMF0gQmFjaycNCiAgICBhX3MoKQ0KDQoNCmRlZiBhdXRvX2NyYWNrKCk6DQogICAgZ2xvYmFsIHRva2VuDQogICAgdHJ5Og0KICAgICAgICB0b2tlbiA9IG9wZW4oJ2FjY2Vzc190b2tlbi50eHQnLCAncicpLnJlYWQoKQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOg0KICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICAgICAgcHJpbnQgbG9nbw0KICAgICAgICBwcmludCAnXHQgTG9naW4gRkIgaWQgdG8gY29udGludWVceDFiWzA7OTdtJw0KICAgICAgICBwcmludCAnJw0KICAgICAgICB0aW1lLnNsZWVwKDEpDQogICAgICAgIGxvZ19tZW51KCkNCg0KICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgIHByaW50IGxvZ28NCiAgICBwcmludCAnXHgxYlsxOzkzbX5+fn4gQXV0byBwYXNzIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJw0KICAgIHByaW50IDQ3ICogJy0nDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMV0gUHVibGljIGlkIGNsb25pbmcnDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMl0gRm9sbG93ZXJzIGNsb25pbmcnDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bM10gRmlsZSBjbG9uaW5nJw0KICAgIHByaW50ICdceDFiWzE7OTJtW0JdIEJhY2snDQogICAgYV9zKCkNCg0KDQpkZWYgYV9zKCk6DQogICAgaWQgPSBbXQ0KICAgIGNwcyA9IFtdDQogICAgb2tzID0gW10NCiAgICBhX3MgPSByYXdfaW5wdXQoJyBceDFiWzE7OTdtXHhlMlx4OTVceGIwXHhlMlx4OTRceDgwaGFkaVx4ZTJceDllXHhhNCAnKQ0KICAgIGlmIGFfcyA9PSAnMSc6DQogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICBwcmludCBsb2dvDQogICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBBdXRvIHBhc3MgcHVibGljIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJw0KICAgICAgICBwcmludCA0NyAqICctJw0KICAgICAgICBpZHQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTNtW1x4ZTJceDk4XHg4NV1FbnRlciBpZDogJykNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tlbikNCiAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKHIudGV4dCkNCiAgICAgICAgICAgIHogPSBxWyduYW1lJ10NCiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICAgICAgcHJpbnQgbG9nbw0KICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+QXV0byBwYXNzIHB1YmxpYyBjcmFja2luZ35+fn4nDQogICAgICAgICAgICBwcmludCAnIFx4MWJbMTs5Mm1DbG9uaW5nIGZyb206ICcgKyB6DQogICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOg0KICAgICAgICAgICAgcHJpbnQgJ1x0IEludmFsaWQgdXNlciBceDFiWzA7OTdtJw0KICAgICAgICAgICAgcmF3X2lucHV0KCcgXHgxYlsxOzkybVByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAnKQ0KICAgICAgICAgICAgYXV0b19jcmFjaygpDQoNCiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICcvZnJpZW5kcz9hY2Nlc3NfdG9rZW49JyArIHRva2VuKQ0KICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpDQogICAgICAgIGZvciBpIGluIHpbJ2RhdGEnXToNCiAgICAgICAgICAgIHVpZCA9IGlbJ2lkJ10NCiAgICAgICAgICAgIG5hID0gaVsnbmFtZSddDQogICAgICAgICAgICBubSA9IG5hLnJzcGxpdCgnICcpWzBdDQogICAgICAgICAgICBpZC5hcHBlbmQodWlkICsgJ3wnICsgbm0pDQoNCiAgICBlbGlmIGFfcyA9PSAnMic6DQogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICBwcmludCBsb2dvDQogICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBOYW1lIHBhc3MgZm9sbG93ZXJzIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJw0KICAgICAgICBwcmludCA0NyAqICctJw0KICAgICAgICBwcmludCAnIFx4MWJbMTs5M21Gb3IgZXhhbXBsZToxMjMsMTIzNCwxMjM0NSw3ODYsMTIsMTEyMlx4MWJbMTs5MW0nDQogICAgICAgIHByaW50IDQ3ICogJy0nDQogICAgICAgIHAxID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVsxXU5hbWUgKyBkaWdpdDogJykNCiAgICAgICAgcDIgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzJdTmFtZSArIGRpZ2l0OiAnKQ0KICAgICAgICBwMyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bM11OYW1lICsgZGlnaXQ6ICcpDQogICAgICAgIHA0ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs0XU5hbWUgKyBkaWdpdDogJykNCiAgICAgICAgaWR0ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkzbVtceGUyXHg5OFx4ODVdRW50ZXIgaWQ6ICcpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZHQgKyAnP2FjY2Vzc190b2tlbj0nICsgdG9rZW4pDQogICAgICAgICAgICBxID0ganNvbi5sb2FkcyhyLnRleHQpDQogICAgICAgICAgICB6ID0gcVsnbmFtZSddDQogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICAgICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBOYW1lIHBhc3MgZm9sbG93ZXJzIGNyYWNraW5nIH5+fn4nDQogICAgICAgICAgICBwcmludCAnIFx4MWJbMTs5Mm1DbG9uaW5nIGZyb206ICcgKyB6DQogICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOg0KICAgICAgICAgICAgcHJpbnQgJ1x0IEludmFsaWQgdXNlciBceDFiWzA7OTdtJw0KICAgICAgICAgICAgcmF3X2lucHV0KCdceDFiWzE7OTJtUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpDQogICAgICAgICAgICBhdXRvX2NyYWNrKCkNCg0KICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJy9zdWJzY3JpYmVycz9hY2Nlc3NfdG9rZW49JyArIHRva2VuICsgJyZsaW1pdD05OTk5OTknKQ0KICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpDQogICAgICAgIGZvciBpIGluIHpbJ2RhdGEnXToNCiAgICAgICAgICAgIHVpZCA9IGlbJ2lkJ10NCiAgICAgICAgICAgIG5hID0gaVsnbmFtZSddDQogICAgICAgICAgICBubSA9IG5hLnJzcGxpdCgnICcpWzBdDQogICAgICAgICAgICBpZC5hcHBlbmQodWlkICsgJ3wnICsgbm0pDQoNCiAgICBlbGlmIGFfcyA9PSAnMyc6DQogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICBwcmludCBsb2dvDQogICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBBdXRvIHBhc3MgRmlsZSBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScNCiAgICAgICAgcHJpbnQgNDcgKiAnLScNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgaWRsaXN0ID0gcmF3X2lucHV0KCdbK10gRmlsZSBOYW1lOiAnKQ0KICAgICAgICAgICAgZm9yIGxpbmUgaW4gb3BlbihpZGxpc3QsICdyJykucmVhZGxpbmVzKCk6DQogICAgICAgICAgICAgICAgaWQuYXBwZW5kKGxpbmUuc3RyaXAoKSkNCg0KICAgICAgICBleGNlcHQgSU9FcnJvcjoNCiAgICAgICAgICAgIHByaW50ICdbIV0gRmlsZSBOb3QgRm91bmQuJw0KICAgICAgICAgICAgcmF3X2lucHV0KCdQcmVzcyBFbnRlciBUbyBCYWNrLiAnKQ0KICAgICAgICAgICAgY3JhY2soKQ0KDQogICAgZWxpZiBhX3MgPT0gJzAnOg0KICAgICAgICBtZW51KCkNCiAgICBlbHNlOg0KICAgICAgICBwcmludCAnJw0KICAgICAgICBwcmludCAnXHRDaG9vc2UgdmFsaWQgb3B0aW9uJyArIHcNCiAgICAgICAgYV9zKCkNCiAgICBwcmludCAnIFRvdGFsIGlkczogJyArIHN0cihsZW4oaWQpKQ0KICAgIHRpbWUuc2xlZXAoMC41KQ0KICAgIHByaW50ICcgXHgxYlsxOzk3bUNyYWNrIFJ1bm5pbmdceDFiWzE7OTFtICcNCiAgICB0aW1lLnNsZWVwKDAuNSkNCiAgICBwcmludCA0NyAqICctJw0KICAgIHByaW50ICdcdFx4MWJbMTs5NG1oYWRpIEtpbmcgT2YgRmFjZWJvb2tceDFiWzE7OTFtJw0KICAgIHByaW50IDQ3ICogJy0nDQoNCiAgICBkZWYgbWFpbihhcmcpOg0KICAgICAgICB1c2VyID0gYXJnDQogICAgICAgIHVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoJ3wnKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBwYXNzMSA9IG5hbWUubG93ZXIoKSArICcxMjM0NScNCiAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3MxLCBoZWFkZXJzPWhlYWRlcikudGV4dA0KICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICAgIGlmICdsb2MnIGluIHE6DQogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bS2luZy1va10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3MxICsgJ1x4MWJbMDs5N20nDQogICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9LaW5nX29rLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MxICsgJ1xuJykNCiAgICAgICAgICAgICAgICBvay5jbG9zZSgpDQogICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzMSkNCiAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106DQogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtLaW5nLUNwXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzMQ0KICAgICAgICAgICAgICAgIGNwID0gb3BlbignS2luZ19DcC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMSArICdcbicpDQogICAgICAgICAgICAgICAgY3AuY2xvc2UoKQ0KICAgICAgICAgICAgICAgIGNwcy5hcHBlbmQodWlkICsgcGFzczEpDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIHBhc3MyID0gbmFtZS5sb3dlcigpICsgJzEyMzQnDQogICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczIsIGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtLaW5nLW9rXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczIgKyAnXHgxYlswOzk3bScNCiAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9LaW5nX29rLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMiArICdcbicpDQogICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzMikNCiAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0tpbmctQ3BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3MyDQogICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignS2luZ19DcC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczIgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgIGNwcy5hcHBlbmQodWlkICsgcGFzczIpDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcGFzczMgPSBuYW1lLmxvd2VyKCkgKyAnNzg2Jw0KICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzMywgaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0tpbmctb2tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzMyArICdceDFiWzA7OTdtJw0KICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9LaW5nX29rLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczMgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzMykNCiAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bS2luZy1DcF0gJyArIHVpZCArICcgfCAnICsgcGFzczMNCiAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignS2luZ19DcC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MzICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBlbmQodWlkICsgcGFzczMpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBwYXNzNCA9IG5hbWUubG93ZXIoKSArICcxMjMnDQogICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzNCwgaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0tpbmctb2tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzNCArICdceDFiWzA7OTdtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvS2luZ19vay50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNCArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczQpDQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bS2luZy1DcF0gJyArIHVpZCArICcgfCAnICsgcGFzczQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0tpbmdfQ3AudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczQgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzczUgPSAnNzg2Nzg2Jw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M1LCBoZWFkZXJzPWhlYWRlcikudGV4dA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bS2luZy1va10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M1ICsgJ1x4MWJbMDs5N20nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvS2luZ19vay50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczUgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtLaW5nLUNwXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzNQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0tpbmdfQ3AudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M1ICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzNiA9ICcxMjMxMjMnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M2LCBoZWFkZXJzPWhlYWRlcikudGV4dA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bS2luZy1va10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M2ICsgJ1x4MWJbMDs5N20nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0tpbmdfb2sudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNiArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3M2KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtLaW5nLUNwXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzNg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdLaW5nX0NwLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczYgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcHBlbmQodWlkICsgcGFzczYpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzNyA9ICc3ODk3ODknDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzNywgaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0tpbmctb2tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzNyArICdceDFiWzA7OTdtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvS2luZ19vay50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNyArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczcpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bS2luZy1DcF0gJyArIHVpZCArICcgfCAnICsgcGFzczcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0tpbmdfQ3AudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczcgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzczggPSAnMDA3ODYwMCcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzOCwgaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0tpbmctb2tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzOCArICdceDFiWzA7OTdtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0tpbmdfb2sudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M4ICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3M4KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bS2luZy1DcF0gJyArIHVpZCArICcgfCAnICsgcGFzczgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdLaW5nX0NwLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzOCArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcHBlbmQodWlkICsgcGFzczgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzczkgPSAnJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzOSwgaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0tpbmctb2tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzOSArICdceDFiWzA7OTdtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9LaW5nX29rLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczkgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzOSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bS2luZy1DcF0gJyArIHVpZCArICcgfCAnICsgcGFzczkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignS2luZ19DcC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M5ICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M5KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzczEwID0gJ3F3ZXJ0eScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3MxMCwgaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0tpbmctb2tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzMTAgKyAnXHgxYlswOzk3bScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0tpbmdfb2sudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczEwICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzMTApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bS2luZy1DcF0gJyArIHVpZCArICcgfCAnICsgcGFzczEwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdLaW5nX0NwLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MxMCArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3MxMCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KDQogICAgcCA9IFRocmVhZFBvb2woMzApDQogICAgcC5tYXAobWFpbiwgaWQpDQogICAgcHJpbnQgNDcgKiAnLScNCiAgICBwcmludCAnIFx4MWJbMTs5Mm1DcmFjayBEb25lJw0KICAgIHByaW50ICcgXHgxYlsxOzkybVRvdGFsIE9rL0NwOicgKyBzdHIobGVuKG9rcykpICsgJy8nICsgc3RyKGxlbihjcHMpKQ0KICAgIHByaW50IDQ3ICogJy0nDQogICAgcmF3X2lucHV0KCcgXHgxYlsxOzkzbVByZXNzIGVudGVyIHRvIGJhY2snKQ0KICAgIGF1dG9fY3JhY2soKQ0KDQoNCmRlZiBjcmFja19iKCk6DQogICAgZ2xvYmFsIHRva2V0DQogICAgdHJ5Og0KICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpDQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6DQogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICBwcmludCBsb2dvDQogICAgICAgIHByaW50ICdcdCBGaWxlIE5vdCBGb3VuZCBceDFiWzA7OTdtJw0KICAgICAgICB0aW1lLnNsZWVwKDEpDQogICAgICAgIGxvZ19tZW51KCkNCg0KICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgIHByaW50IGxvZ28NCiAgICBwcmludCAnXHgxYlsxOzkzbX5+fn4gTnVtYmVyIHBhc3MgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nDQogICAgcHJpbnQgNDcgKiAnLScNCiAgICBwcmludCAnXHgxYlsxOzkybVsxXSBQdWJsaWMgaWQgY2xvbmluZycNCiAgICBwcmludCAnXHgxYlsxOzkybVsyXSBGb2xsb3dlcnMgY2xvbmluZycNCiAgICBwcmludCAnXHgxYlsxOzkybVszXSBGaWxlIGNsb25pbmcnDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMF0gQmFjaycNCiAgICBjX3MoKQ0KDQoNCmRlZiBjaG9pY2VfY3JhY2soKToNCiAgICBnbG9iYWwgdG9rZW4NCiAgICB0cnk6DQogICAgICAgIHRva2VuID0gb3BlbignYWNjZXNzX3Rva2VuLnR4dCcsICdyJykucmVhZCgpDQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6DQogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICBwcmludCBsb2dvDQogICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+IExvZ2luIEZCIGlkIHRvIGNvbnRpbnVlIH5+ficNCiAgICAgICAgdGltZS5zbGVlcCgxKQ0KICAgICAgICBsb2dfbWVudSgpDQoNCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICBwcmludCBsb2dvDQogICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE51bWJlciBwYXNzIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJw0KICAgIHByaW50IDQ3ICogJy0nDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMV0gUHVibGljIGlkIGNsb25pbmcnDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMl0gRm9sbG93ZXJzIGNsb25pbmcnDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bM10gRmlsZSBjbG9uaW5nJw0KICAgIHByaW50ICdceDFiWzE7OTJtW0JdIEJhY2snDQogICAgY19zKCkNCg0KDQpkZWYgY19zKCk6DQogICAgaWQgPSBbXQ0KICAgIGNwcyA9IFtdDQogICAgb2tzID0gW10NCiAgICBhX3MgPSByYXdfaW5wdXQoJyBceDFiWzE7OTdtXHhlMlx4OTVceGIwXHhlMlx4OTRceDgwaGFkaVx4ZTJceDllXHhhNCAnKQ0KICAgIGlmIGFfcyA9PSAnMSc6DQogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICBwcmludCBsb2dvDQogICAgICAgIHByaW50ICdceDFiWzE7OTNtIH5+fn4gTnVtYmVyIHBhc3MgUHVibGljIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJw0KICAgICAgICBwcmludCA0NyAqICctJw0KICAgICAgICBwcmludCAnXHgxYlsxOzkzbSBGb3IgZXhhbXBsZToyMzQ1NjcsMjIzMzQ0LDMzNDQ1NSw0NDU1NjZceDFiWzE7OTFtJw0KICAgICAgICBwcmludCA0NyAqICctJw0KICAgICAgICBwYXNzMSA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bMV1QYXNzd29yZDogJykNCiAgICAgICAgcGFzczIgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzJdUGFzc3dvcmQ6ICcpDQogICAgICAgIHBhc3MzID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVszXVBhc3N3b3JkOiAnKQ0KICAgICAgICBwYXNzNCA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bNF1QYXNzd29yZDogJykNCiAgICAgICAgcGFzczUgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzVdUGFzc3dvcmQ6ICcpDQogICAgICAgIHBhc3M2ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs2XVBhc3N3b3JkOiAnKQ0KICAgICAgICBpZHQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTNtW1x4ZTJceDk4XHg4NV1FbnRlciBpZDogJykNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tlbikNCiAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKHIudGV4dCkNCiAgICAgICAgICAgIHogPSBxWyduYW1lJ10NCiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICAgICAgcHJpbnQgbG9nbw0KICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M20gfn5+fiBOdW1iZXIgcGFzcyBQdWJsaWMgY3JhY2tpbmcgfn5+ficNCiAgICAgICAgICAgIHByaW50ICcgQ2xvbmluZyBmcm9tOiAnICsgeg0KICAgICAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToNCiAgICAgICAgICAgIHByaW50ICdcdCBJbnZhbGlkIHVzZXIgXHgxYlswOzk3bScNCiAgICAgICAgICAgIHJhd19pbnB1dCgnIFByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAnKQ0KICAgICAgICAgICAgY2hvaWNlX2NyYWNrKCkNCg0KICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJy9mcmllbmRzP2FjY2Vzc190b2tlbj0nICsgdG9rZW4pDQogICAgICAgIHogPSBqc29uLmxvYWRzKHIudGV4dCkNCiAgICAgICAgZm9yIGkgaW4gelsnZGF0YSddOg0KICAgICAgICAgICAgdWlkID0gaVsnaWQnXQ0KICAgICAgICAgICAgbmEgPSBpWyduYW1lJ10NCiAgICAgICAgICAgIG5tID0gbmEucnNwbGl0KCcgJylbMF0NCiAgICAgICAgICAgIGlkLmFwcGVuZCh1aWQgKyAnfCcgKyBubSkNCg0KICAgIGVsaWYgYV9zID09ICcyJzoNCiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE51bWJlciBwYXNzIGZvbGxvd2VycyBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScNCiAgICAgICAgcHJpbnQgNDcgKiAnLScNCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M20gRm9yIGV4YW1wbGU6MjM0NTY3LDIyMzM0NCwzMzQ0NTUsNDQ1NTY2XHgxYlsxOzkxbScNCiAgICAgICAgcHJpbnQgNDcgKiAnLScNCiAgICAgICAgcGFzczEgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzFdUGFzc3dvcmQ6ICcpDQogICAgICAgIHBhc3MyID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVsyXVBhc3N3b3JkOiAnKQ0KICAgICAgICBwYXNzMyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bM11QYXNzd29yZDogJykNCiAgICAgICAgcGFzczQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzRdUGFzc3dvcmQ6ICcpDQogICAgICAgIGlkdCA9IHJhd19pbnB1dCgnIFx4MWJbMTs5M21FbnRlciBpZDogJykNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tlbikNCiAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKHIudGV4dCkNCiAgICAgICAgICAgIHogPSBxWyduYW1lJ10NCiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICAgICAgcHJpbnQgbG9nbw0KICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE51bWJlciBwYXNzIGZvbGxvd2VycyBjcmFja2luZyB+fn5+Jw0KICAgICAgICAgICAgcHJpbnQgJyBDbG9uaW5nIGZyb206ICcgKyB6DQogICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOg0KICAgICAgICAgICAgcHJpbnQgJ1x0IEludmFsaWQgdXNlciBceDFiWzA7OTdtJw0KICAgICAgICAgICAgcmF3X2lucHV0KCdQcmVzcyBlbnRlciB0byB0cnkgYWdhaW4gJykNCiAgICAgICAgICAgIGF1dG9fY3JhY2soKQ0KDQogICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZHQgKyAnL3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0nICsgdG9rZW4gKyAnJmxpbWl0PTk5OTk5OScpDQogICAgICAgIHogPSBqc29uLmxvYWRzKHIudGV4dCkNCiAgICAgICAgZm9yIGkgaW4gelsnZGF0YSddOg0KICAgICAgICAgICAgdWlkID0gaVsnaWQnXQ0KICAgICAgICAgICAgbmEgPSBpWyduYW1lJ10NCiAgICAgICAgICAgIG5tID0gbmEucnNwbGl0KCcgJylbMF0NCiAgICAgICAgICAgIGlkLmFwcGVuZCh1aWQgKyAnfCcgKyBubSkNCg0KICAgIGVsaWYgYV9zID09ICczJzoNCiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M20gfn5+fiBOdW1iZXIgcGFzcyBGaWxlIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJw0KICAgICAgICBwcmludCA0NyAqICctJw0KICAgICAgICBwcmludCAnXHgxYlsxOzkzbSBGb3IgZXhhbXBsZToyMzQ1NjcsMjIzMzQ0LDMzNDQ1NSw0NDU1NjZceDFiWzE7OTFtJw0KICAgICAgICBwcmludCA0NyAqICctJw0KICAgICAgICBwYXNzMSA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bMV1QYXNzd29yZDogJykNCiAgICAgICAgcGFzczIgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzJdUGFzc3dvcmQ6ICcpDQogICAgICAgIHBhc3MzID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVszXVBhc3N3b3JkOiAnKQ0KICAgICAgICBwYXNzNCA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bNF1QYXNzd29yZDogJykNCiAgICAgICAgcGFzczUgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzVdUGFzc3dvcmQ6ICcpDQogICAgICAgIHBhc3M2ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs2XVBhc3N3b3JkOiAnKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBpZGxpc3QgPSByYXdfaW5wdXQoJ1srXSBGaWxlIE5hbWU6ICcpDQogICAgICAgICAgICBmb3IgbGluZSBpbiBvcGVuKGlkbGlzdCwgJ3InKS5yZWFkbGluZXMoKToNCiAgICAgICAgICAgICAgICBpZC5hcHBlbmQobGluZS5zdHJpcCgpKQ0KDQogICAgICAgIGV4Y2VwdCBJT0Vycm9yOg0KICAgICAgICAgICAgcHJpbnQgJ1shXSBGaWxlIE5vdCBGb3VuZC4nDQogICAgICAgICAgICByYXdfaW5wdXQoJ1ByZXNzIEVudGVyIFRvIEJhY2suICcpDQogICAgICAgICAgICBjcmFja19iKCkNCg0KICAgIGVsaWYgYV9zID09ICcwJzoNCiAgICAgICAgbWVudSgpDQogICAgZWxzZToNCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgcHJpbnQgJ1x0IENob29zZSB2YWxpZCBvcHRpb24nICsgdw0KICAgICAgICBjX3MoKQ0KICAgIHByaW50ICcgVG90YWwgaWRzOiAnICsgc3RyKGxlbihpZCkpDQogICAgdGltZS5zbGVlcCgwLjUpDQogICAgcHJpbnQgJyBceDFiWzE7OTdtfn5+IENyYWNrIFJ1bm5pbmcgfn5+XHgxYlsxOzkxbScNCiAgICB0aW1lLnNsZWVwKDAuNSkNCiAgICBwcmludCA0NyAqICctJw0KICAgIHByaW50ICdcdFx4MWJbMTs5NG1oYWRpIEtpbmcgT2YgRmNlYm9va1x4MWJbMTs5MW0nDQogICAgcHJpbnQgNDcgKiAnLScNCg0KICAgIGRlZiBtYWluKGFyZyk6DQogICAgICAgIHVzZXIgPSBhcmcNCiAgICAgICAgdWlkLCBuYW1lID0gdXNlci5zcGxpdCgnfCcpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3MxLCBoZWFkZXJzPWhlYWRlcikudGV4dA0KICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICAgIGlmICdsb2MnIGluIHE6DQogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bS2luZy1va10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3MxICsgJ1x4MWJbMDs5N20nDQogICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9LaW5nX29rLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MxICsgJ1xuJykNCiAgICAgICAgICAgICAgICBvay5jbG9zZSgpDQogICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzMSkNCiAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106DQogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtLaW5nLUNwXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzMQ0KICAgICAgICAgICAgICAgIGNwID0gb3BlbignS2luZ19DcC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMSArICdcbicpDQogICAgICAgICAgICAgICAgY3AuY2xvc2UoKQ0KICAgICAgICAgICAgICAgIGNwcy5hcHBlbmQodWlkICsgcGFzczEpDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3MyLCBoZWFkZXJzPWhlYWRlcikudGV4dA0KICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpDQogICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bS2luZy1va10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3MyICsgJ1x4MWJbMDs5N20nDQogICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvS2luZ19vay50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczIgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczIpDQogICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtLaW5nLUNwXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzMg0KICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0tpbmdfQ3AudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MyICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICBjcHMuYXBwZW5kKHVpZCArIHBhc3MyKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3MzLCBoZWFkZXJzPWhlYWRlcikudGV4dA0KICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQ0KICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bS2luZy1va10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3MzICsgJ1x4MWJbMDs5N20nDQogICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0tpbmdfb2sudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMyArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3MzKQ0KICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtLaW5nLUNwXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzMw0KICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdLaW5nX0NwLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczMgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcGVuZCh1aWQgKyBwYXNzMykNCiAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M0LCBoZWFkZXJzPWhlYWRlcikudGV4dA0KICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bS2luZy1va10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M0ICsgJ1x4MWJbMDs5N20nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9LaW5nX29rLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M0ICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzNCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtLaW5nLUNwXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzNA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignS2luZ19DcC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNCArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzNSwgaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0tpbmctb2tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzNSArICdceDFiWzA7OTdtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0tpbmdfb2sudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M1ICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3M1KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bS2luZy1DcF0gJyArIHVpZCArICcgfCAnICsgcGFzczUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdLaW5nX0NwLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNSArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcHBlbmQodWlkICsgcGFzczUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczYsIGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtLaW5nLW9rXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczYgKyAnXHgxYlswOzk3bScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvS2luZ19vay50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M2ICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczYpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0tpbmctQ3BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M2DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0tpbmdfQ3AudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNiArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNikNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KDQogICAgcCA9IFRocmVhZFBvb2woMzApDQogICAgcC5tYXAobWFpbiwgaWQpDQogICAgcHJpbnQgNDcgKiAnLScNCiAgICBwcmludCAnIFx4MWJbMTs5Mm1DcmFjayBEb25lJw0KICAgIHByaW50ICdceDFiWzE7OTJtIFRvdGFsIE9rL0NwOicgKyBzdHIobGVuKG9rcykpICsgJy8nICsgc3RyKGxlbihjcHMpKQ0KICAgIHByaW50IDQ3ICogJy0nDQogICAgcmF3X2lucHV0KCdceDFiWzE7OTNtIFByZXNzIGVudGVyIHRvIGJhY2snKQ0KICAgIGNob2ljZV9jcmFjaygpDQoNCmRlZiBjcmFja19iKCk6DQogICAgZ2xvYmFsIHRva2V0DQogICAgdHJ5Og0KICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpDQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6DQogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICBwcmludCBsb2dvDQogICAgICAgIHByaW50ICdcdCBGaWxlIE5vdCBGb3VuZCBceDFiWzA7OTdtJw0KICAgICAgICBwcmludCAnJw0KICAgICAgICB0aW1lLnNsZWVwKDEpDQogICAgICAgIGxvZ19tZW51KCkNCg0KICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgIHByaW50IGxvZ28NCiAgICBwcmludCAnXHgxYlsxOzkzbX5+fn4gTmFtZSArIE51bWJlciBwYXNzIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJw0KICAgIHByaW50IDQ3ICogJy0nDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMV0gUHVibGljIGlkIGNsb25pbmcnDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMl0gRm9sbG93ZXJzIGNsb25pbmcnDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bM10gRmlsZSBjbG9uaW5nJw0KICAgIHByaW50ICdceDFiWzE7OTJtWzBdIEJhY2snDQogICAgYV9zKCkNCg0KDQpkZWYgbmFtZV9jcmFjaygpOg0KICAgIGdsb2JhbCB0b2tlbg0KICAgIHRyeToNCiAgICAgICAgdG9rZW4gPSBvcGVuKCdhY2Nlc3NfdG9rZW4udHh0JywgJ3InKS5yZWFkKCkNCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToNCiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgcHJpbnQgJ1x0IExvZ2luIEZCIGlkIHRvIGNvbnRpbnVlXHgxYlswOzk3bScNCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgdGltZS5zbGVlcCgxKSANCiAgICAgICAgbG9nX21lbnUoKQ0KDQogICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgcHJpbnQgbG9nbw0KICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBOYW1lICsgTnVtYmVyIHBhc3MgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nDQogICAgcHJpbnQgNDcgKiAnLScNCiAgICBwcmludCAnXHgxYlsxOzkybVsxXSBQdWJsaWMgaWQgY2xvbmluZycNCiAgICBwcmludCAnXHgxYlsxOzkybVsyXSBGb2xsb3dlcnMgY2xvbmluZycNCiAgICBwcmludCAnXHgxYlsxOzkybVszXSBGaWxlIGNsb25pbmcnDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bQl0gQmFjaycNCiAgICBuX3MoKQ0KDQoNCmRlZiBuX3MoKToNCiAgICBpZCA9IFtdDQogICAgY3BzID0gW10NCiAgICBva3MgPSBbXQ0KICAgIGFfcyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5N21ceGUyXHg5NVx4YjBceGUyXHg5NFx4ODBoYWRpXHhlMlx4OWVceGE0ICcpDQogICAgaWYgYV9zID09ICcxJzoNCiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE5hbWUgKyBOdW1iZXIgcGFzcyBwdWJsaWMgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nDQogICAgICAgIHByaW50IDQ3ICogJy0nDQogICAgICAgIHByaW50ICdceDFiWzE7OTNtRm9yIGV4YW1wbGU6MTIzLDEyMzQsMTIzNDUsNzg2LDEyLDExMjJceDFiWzE7OTFtJw0KICAgICAgICBwcmludCA0NyAqICctJw0KICAgICAgICBwMSA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bMV1OYW1lICsgZGlnaXQ6ICcpDQogICAgICAgIHAyID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVsyXU5hbWUgKyBkaWdpdDogJykNCiAgICAgICAgcDMgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzNdTmFtZSArIGRpZ2l0OiAnKQ0KICAgICAgICBwNCA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bNF1OYW1lICsgZGlnaXQ6ICcpDQogICAgICAgIHBhc3M1ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs1XVBhc3N3b3JkOiAnKQ0KICAgICAgICBwYXNzNiA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bNl1QYXNzd29yZDogJykNCiAgICAgICAgcGFzczcgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzddUGFzc3dvcmQ6ICcpDQogICAgICAgIHBhc3M4ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs4XVBhc3N3b3JkOiAnKQ0KICAgICAgICBpZHQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTNtW1x4ZTJceDk4XHg4NV1FbnRlciBpZDogJykNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tlbikNCiAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKHIudGV4dCkNCiAgICAgICAgICAgIHogPSBxWyduYW1lJ10NCiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICAgICAgcHJpbnQgbG9nbw0KICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+TmFtZSBwYXNzIHB1YmxpYyBjcmFja2luZ35+fn4nDQogICAgICAgICAgICBwcmludCAnIFx4MWJbMTs5Mm1DbG9uaW5nIGZyb206ICcgKyB6DQogICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOg0KICAgICAgICAgICAgcHJpbnQgJ1x0IEludmFsaWQgdXNlciBceDFiWzA7OTdtJw0KICAgICAgICAgICAgcmF3X2lucHV0KCcgXHgxYlsxOzkybVByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAnKQ0KICAgICAgICAgICAgbmFtZV9jcmFjaygpDQoNCiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICcvZnJpZW5kcz9hY2Nlc3NfdG9rZW49JyArIHRva2VuKQ0KICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpDQogICAgICAgIGZvciBpIGluIHpbJ2RhdGEnXToNCiAgICAgICAgICAgIHVpZCA9IGlbJ2lkJ10NCiAgICAgICAgICAgIG5hID0gaVsnbmFtZSddDQogICAgICAgICAgICBubSA9IG5hLnJzcGxpdCgnICcpWzBdDQogICAgICAgICAgICBpZC5hcHBlbmQodWlkICsgJ3wnICsgbm0pDQoNCiAgICBlbGlmIGFfcyA9PSAnMic6DQogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICBwcmludCBsb2dvDQogICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBOYW1lIHBhc3MgZm9sbG93ZXJzIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJw0KICAgICAgICBwcmludCA0NyAqICctJw0KICAgICAgICBwcmludCAnIFx4MWJbMTs5M21Gb3IgZXhhbXBsZToxMjMsMTIzNCwxMjM0NSw3ODYsMTIsMTEyMlx4MWJbMTs5MW0nDQogICAgICAgIHByaW50IDQ3ICogJy0nDQogICAgICAgIHAxID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVsxXU5hbWUgKyBkaWdpdDogJykNCiAgICAgICAgcDIgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzJdTmFtZSArIGRpZ2l0OiAnKQ0KICAgICAgICBwMyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bM11OYW1lICsgZGlnaXQ6ICcpDQogICAgICAgIHA0ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs0XU5hbWUgKyBkaWdpdDogJykNCiAgICAgICAgaWR0ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkzbVtceGUyXHg5OFx4ODVdRW50ZXIgaWQ6ICcpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZHQgKyAnP2FjY2Vzc190b2tlbj0nICsgdG9rZW4pDQogICAgICAgICAgICBxID0ganNvbi5sb2FkcyhyLnRleHQpDQogICAgICAgICAgICB6ID0gcVsnbmFtZSddDQogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICAgICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBOYW1lIHBhc3MgZm9sbG93ZXJzIGNyYWNraW5nIH5+fn4nDQogICAgICAgICAgICBwcmludCAnIFx4MWJbMTs5Mm1DbG9uaW5nIGZyb206ICcgKyB6DQogICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOg0KICAgICAgICAgICAgcHJpbnQgJ1x0IEludmFsaWQgdXNlciBceDFiWzA7OTdtJw0KICAgICAgICAgICAgcmF3X2lucHV0KCdceDFiWzE7OTJtUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpDQogICAgICAgICAgICBhdXRvX2NyYWNrKCkNCg0KICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJy9zdWJzY3JpYmVycz9hY2Nlc3NfdG9rZW49JyArIHRva2VuICsgJyZsaW1pdD05OTk5OTknKQ0KICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpDQogICAgICAgIGZvciBpIGluIHpbJ2RhdGEnXToNCiAgICAgICAgICAgIHVpZCA9IGlbJ2lkJ10NCiAgICAgICAgICAgIG5hID0gaVsnbmFtZSddDQogICAgICAgICAgICBubSA9IG5hLnJzcGxpdCgnICcpWzBdDQogICAgICAgICAgICBpZC5hcHBlbmQodWlkICsgJ3wnICsgbm0pDQoNCiAgICBlbGlmIGFfcyA9PSAnMyc6DQogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICBwcmludCBsb2dvDQogICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBOYW1lICsgTnVtYmVyIHBhc3MgRmlsZSBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScNCiAgICAgICAgcHJpbnQgNDcgKiAnLScNCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21Gb3IgZXhhbXBsZToxMjMsMTIzNCwxMjM0NSw3ODYsMTIsMTEyMlx4MWJbMTs5MW0nDQogICAgICAgIHByaW50IDQ3ICogJy0nDQogICAgICAgIHAxID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVsxXU5hbWUgKyBkaWdpdDogJykNCiAgICAgICAgcDIgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzJdTmFtZSArIGRpZ2l0OiAnKQ0KICAgICAgICBwMyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bM11OYW1lICsgZGlnaXQ6ICcpDQogICAgICAgIHA0ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs0XU5hbWUgKyBkaWdpdDogJykNCiAgICAgICAgcGFzczUgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzVdUGFzc3dvcmQ6ICcpDQogICAgICAgIHBhc3M2ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs2XVBhc3N3b3JkOiAnKQ0KICAgICAgICBwYXNzNyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bN11QYXNzd29yZDogJykNCiAgICAgICAgcGFzczggPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzhdUGFzc3dvcmQ6ICcpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGlkbGlzdCA9IHJhd19pbnB1dCgnWytdIEZpbGUgTmFtZTogJykNCiAgICAgICAgICAgIGZvciBsaW5lIGluIG9wZW4oaWRsaXN0LCAncicpLnJlYWRsaW5lcygpOg0KICAgICAgICAgICAgICAgIGlkLmFwcGVuZChsaW5lLnN0cmlwKCkpDQoNCiAgICAgICAgZXhjZXB0IElPRXJyb3I6DQogICAgICAgICAgICBwcmludCAnWyFdIEZpbGUgTm90IEZvdW5kLicNCiAgICAgICAgICAgIHJhd19pbnB1dCgnUHJlc3MgRW50ZXIgVG8gQmFjay4gJykNCiAgICAgICAgICAgIGNyYWNrKCkNCg0KICAgIGVsaWYgYV9zID09ICcwJzoNCiAgICAgICAgbWVudSgpDQogICAgZWxzZToNCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgcHJpbnQgJ1x0Q2hvb3NlIHZhbGlkIG9wdGlvbicgKyB3DQogICAgICAgIGFfcygpDQogICAgcHJpbnQgJyBUb3RhbCBpZHM6ICcgKyBzdHIobGVuKGlkKSkNCiAgICB0aW1lLnNsZWVwKDAuNSkNCiAgICBwcmludCAnIFx4MWJbMTs5N21DcmFjayBSdW5uaW5nXHgxYlsxOzkxbSAnDQogICAgdGltZS5zbGVlcCgwLjUpDQogICAgcHJpbnQgNDcgKiAnLScNCiAgICBwcmludCAnXHRceDFiWzE7OTRtaGFkaSBLaW5nIE9mIEZhY2Vib29rXHgxYlsxOzkxbScNCiAgICBwcmludCA0NyAqICctJw0KDQogICAgZGVmIG1haW4oYXJnKToNCiAgICAgICAgdXNlciA9IGFyZw0KICAgICAgICB1aWQsIG5hbWUgPSB1c2VyLnNwbGl0KCd8JykNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgcGFzczEgPSBuYW1lLmxvd2VyKCkgKyBwMQ0KICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczEsIGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQ0KICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToNCiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtLaW5nLW9rXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczEgKyAnXHgxYlswOzk3bScNCiAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0tpbmdfb2sudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczEgKyAnXG4nKQ0KICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkNCiAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3MxKQ0KICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToNCiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0tpbmctQ3BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3MxDQogICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdLaW5nX0NwLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MxICsgJ1xuJykNCiAgICAgICAgICAgICAgICBjcC5jbG9zZSgpDQogICAgICAgICAgICAgICAgY3BzLmFwcGVuZCh1aWQgKyBwYXNzMSkNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgcGFzczIgPSBuYW1lLmxvd2VyKCkgKyBwMg0KICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3MyLCBoZWFkZXJzPWhlYWRlcikudGV4dA0KICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpDQogICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bS2luZy1va10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3MyICsgJ1x4MWJbMDs5N20nDQogICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvS2luZ19vay50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczIgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczIpDQogICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtLaW5nLUNwXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzMg0KICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0tpbmdfQ3AudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MyICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICBjcHMuYXBwZW5kKHVpZCArIHBhc3MyKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHBhc3MzID0gbmFtZS5sb3dlcigpICsgcDMNCiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczMsIGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpDQogICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtLaW5nLW9rXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczMgKyAnXHgxYlswOzk3bScNCiAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvS2luZ19vay50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MzICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczMpDQogICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0tpbmctQ3BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3MzDQogICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0tpbmdfQ3AudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMyArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwZW5kKHVpZCArIHBhc3MzKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgcGFzczQgPSBuYW1lLmxvd2VyKCkgKyBwNA0KICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczQsIGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtLaW5nLW9rXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczQgKyAnXHgxYlswOzk3bScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0tpbmdfb2sudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczQgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3M0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0tpbmctQ3BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdLaW5nX0NwLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M0ICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcHBlbmQodWlkICsgcGFzczQpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M1LCBoZWFkZXJzPWhlYWRlcikudGV4dA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bS2luZy1va10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M1ICsgJ1x4MWJbMDs5N20nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvS2luZ19vay50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczUgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtLaW5nLUNwXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzNQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0tpbmdfQ3AudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M1ICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzNiwgaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0tpbmctb2tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzNiArICdceDFiWzA7OTdtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9LaW5nX29rLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczYgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzNikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bS2luZy1DcF0gJyArIHVpZCArICcgfCAnICsgcGFzczYNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignS2luZ19DcC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M2ICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M2KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczcsIGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtLaW5nLW9rXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczcgKyAnXHgxYlswOzk3bScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0tpbmdfb2sudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczcgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3M3KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0tpbmctQ3BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M3DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdLaW5nX0NwLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M3ICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcHBlbmQodWlkICsgcGFzczcpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M4LCBoZWFkZXJzPWhlYWRlcikudGV4dA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bS2luZy1va10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M4ICsgJ1x4MWJbMDs5N20nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvS2luZ19vay50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczggKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtLaW5nLUNwXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzOA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0tpbmdfQ3AudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M4ICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzOCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KDQogICAgcCA9IFRocmVhZFBvb2woMzApDQogICAgcC5tYXAobWFpbiwgaWQpDQogICAgcHJpbnQgNDcgKiAnLScNCiAgICBwcmludCAnIFx4MWJbMTs5Mm1DcmFjayBEb25lJw0KICAgIHByaW50ICcgXHgxYlsxOzkybVRvdGFsIE9rL0NwOicgKyBzdHIobGVuKG9rcykpICsgJy8nICsgc3RyKGxlbihjcHMpKQ0KICAgIHByaW50IDQ3ICogJy0nDQogICAgcmF3X2lucHV0KCcgXHgxYlsxOzkzbVByZXNzIGVudGVyIHRvIGJhY2snKQ0KICAgIGF1dG9fY3JhY2soKQ0KICAgIGJvdCgpDQoNCmlmIF9fbmFtZV9fID09J19fbWFpbl9fJzoNCiAgICBpcCgpIA0KDQo="))
